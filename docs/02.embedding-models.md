# 국내 식품 쇼핑몰 검색용 DJL 임베딩 모델 비교

이 문서는 국내 식품 쇼핑몰의 **의미 기반 검색(벡터 검색)**에 적합한 DJL 임베딩 모델을 비교합니다.
검색 기획자와 검색 개발자가 모델 선택 시 판단하기 쉽도록 **품질/속도/운영 비용** 관점으로 정리했습니다.

## 1. 추천 모델 요약
- 1순위: `dragonkue/multilingual-e5-small-ko-v2`
- 2순위: `dragonkue/multilingual-e5-small-ko`
- 대안(고품질): `BAAI/bge-m3`
- 추가 비교: `sentence-transformers/paraphrase-multilingual-MiniLM-L6-v2`, `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`

## 2. 모델 비교표
| 모델 | 임베딩 차원 | 최대 토큰 길이 | 특징 요약 | 품질 기대치 | 속도/비용 | 운영 적합성 | 비고 |
| --- | --- | --- | --- | --- | --- | --- | --- |
| `dragonkue/multilingual-e5-small-ko-v2` | 384 | 512 | 한국어 검색에 최적화된 경량 e5 계열 | 높음 | 빠름 / 저비용 | 높음 | 실서비스 밸런스형 |
| `dragonkue/multilingual-e5-small-ko` | 384 | 512 | v2보다 더 가벼운 기본형 | 중간~높음 | 매우 빠름 / 매우 저비용 | 높음 | 데모/저비용에 적합 |
| `BAAI/bge-m3` | 1024 | 8192 | 다국어+장문에 강한 대형 모델 | 매우 높음 | 느림 / 고비용 | 중간 | 리소스 여유 필요 |
| `sentence-transformers/paraphrase-multilingual-MiniLM-L6-v2` | 확인 필요 | 확인 필요 | 다국어 문장 유사도용 경량 MiniLM | 중간 | 매우 빠름 / 저비용 | 높음 | 공식 모델 카드 스펙 확인 필요 |
| `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2` | 384 | 128 | L6 대비 더 깊은(정확도↑) MiniLM | 중간~높음 | 빠름 / 저비용 | 높음 | 본 프로젝트 기본값 |

## 3. 모델별 상세 설명

### 3-1. `dragonkue/multilingual-e5-small-ko-v2`
- **추천 이유**: 한국어 검색 품질과 운영 효율의 균형이 좋습니다.
- **적합 상황**:
  - 상품명/설명 텍스트가 짧~중간 길이일 때
  - 응답 속도와 검색 품질을 동시에 중요하게 볼 때
- **기대 효과**:
  - “간식/스낵/과자”처럼 의미가 유사한 표현을 잘 묶어줌

### 3-2. `dragonkue/multilingual-e5-small-ko`
- **추천 이유**: 더 가볍고 빠르며 비용이 낮습니다.
- **적합 상황**:
  - PoC/프로토타입 단계
  - 서버 리소스가 작은 환경
- **주의점**:
  - v2 대비 의미 구분이 조금 약할 수 있음

### 3-3. `BAAI/bge-m3`
- **추천 이유**: 검색 품질 최우선 모델로 장문 이해에 강함
- **적합 상황**:
  - 상품 설명이 길거나, 다양한 문장 표현이 섞여 있는 경우
  - 성능보다 검색 품질이 우선일 때
- **주의점**:
  - 모델 크기가 크고 인덱싱/검색 비용이 증가

### 3-4. `sentence-transformers/paraphrase-multilingual-MiniLM-L6-v2`
- **추천 이유**: 모델이 작고 빠르며 다국어 범용성 확보
- **적합 상황**:
  - 빠른 응답이 최우선인 경우
  - 짧은 상품명/키워드 중심 검색
- **주의점**:
  - 한국어 특화 모델 대비 품질이 낮을 수 있음

### 3-5. `sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2`
- **추천 이유**: L6보다 더 깊은 모델로 품질 향상 기대
- **적합 상황**:
  - 품질과 속도 사이의 균형이 필요한 경우
  - 이미 본 프로젝트 기본값으로 안정적으로 사용 가능
- **주의점**:
  - e5 계열 대비 한국어 최적화는 약할 수 있음

## 4. 프로젝트 적용 방법 (DJL 설정)
`application.yml`에서 `embedding-model-url` 값을 변경하면 바로 적용됩니다.

### 1순위 모델
```yaml
ai-search:
  embedding-model-url: djl://ai.djl.huggingface.pytorch/dragonkue/multilingual-e5-small-ko-v2
```

### 2순위 모델
```yaml
ai-search:
  embedding-model-url: djl://ai.djl.huggingface.pytorch/dragonkue/multilingual-e5-small-ko
```

### 대안(고품질)
```yaml
ai-search:
  embedding-model-url: djl://ai.djl.huggingface.pytorch/BAAI/bge-m3
```

### 추가 비교 모델 (MiniLM 계열)
```yaml
ai-search:
  embedding-model-url: djl://ai.djl.huggingface.pytorch/sentence-transformers/paraphrase-multilingual-MiniLM-L6-v2
```

```yaml
ai-search:
  embedding-model-url: djl://ai.djl.huggingface.pytorch/sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2
```

## 5. 선택 체크리스트
- 검색 품질을 최우선으로 볼 것인가?
- 현재 서버 메모리/CPU 여유는 충분한가?
- 상품 설명 길이(짧은지, 긴지)는 어떤가?
- 재색인 비용(모델 변경 시)을 감당할 수 있는가?

---

원하면 실제 검색 로그 기반으로 모델 A/B 평가 방법까지 정리해 드릴 수 있습니다.



### 참고 자료
https://hanaoverride.tistory.com/15
