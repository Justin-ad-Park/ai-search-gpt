1. 콘솔 출력/사용하지 않는 import 제거

- 파일: src/main/java/com/example/aisearch/service/DjlEmbeddingService.java
- 문제: import java.io.Console; 미사용, System.out.println 직접 출력은 로깅 정책과 혼재.
- 개선: Logger로 교체하거나 제거. (SRP/일관된 로깅)

2. SearchStrategy 확장성 보강

- 파일: src/main/java/com/example/aisearch/service/SearchStrategy.java, src/main/java/com/example/aisearch/service/KnnSearchStrategy.java
- 문제: 현재 단일 구현만 존재 → 실제 확장 요구가 없다면 과설계 가능.
- 개선 선택지:
  - 확장 계획이 있다면 유지 (Strategy 패턴 정당화)
  - 없다면 ProductSearchService로 단순화 (YAGNI)

3. ElasticsearchK8sHelper 정적 의존 최소화

- 파일: src/main/java/com/example/aisearch/support/ElasticsearchK8sHelper.java, src/main/java/com/example/aisearch/support/K8sPortForwarder.java
- 문제: 정적 유틸 사용으로 DIP 위반, 테스트/대체 구현 어려움.
- 개선: K8sClient 인터페이스 도입 + 구현체로 감싸기 (Adapter)

4. IndexSchemaBuilder 템플릿 캐싱

- 파일: src/main/java/com/example/aisearch/service/IndexSchemaBuilder.java
- 문제: 매번 파일 읽기 → 호출 빈도가 늘면 비효율.
- 개선: 템플릿 내용을 캐시하거나 @PostConstruct 로딩.

5. EmbeddingModelSourceResolver 책임 명확화

- 파일: src/main/java/com/example/aisearch/service/EmbeddingModelSourceResolver.java
- 문제: ResourceLoader 전달 방식이 다소 어색 (서비스가 다시 주입받는 구조).
- 개선: ResourceLoader를 필드로 주입해 의존성 정리.

6. IndexManagementService 실패/복구 전략

- 파일: src/main/java/com/example/aisearch/service/IndexManagementService.java
- 문제: 인덱스 삭제/생성 실패 시 롤백 없음.
- 개선: 템플릿 기반 재생성 대신 별도 “create if absent / update mapping” 전략 분리 (Command 패턴 또는 정책 분리)

7. BulkIndexingExecutor 응답 오류 상세화

- 파일: src/main/java/com/example/aisearch/service/BulkIndexingExecutor.java
- 문제: response.errors()만 체크하고 구체 실패 원인 누락.
- 개선: 실패 item 요약 로그/예외 메시지에 포함.

8. FoodProductDocumentMapper 필드명 상수화

- 파일: src/main/java/com/example/aisearch/service/FoodProductDocumentMapper.java
- 문제: 문자열 키 하드코딩 → 매핑/검색과 중복.
- 개선: IndexFields 상수 클래스로 통합 (DRY)

9. ElasticsearchAutoConnector 예외 정책

- 파일: src/main/java/com/example/aisearch/support/ElasticsearchAutoConnector.java
- 문제: 모든 예외를 동일 처리 후 폴백. 실패 원인 구분 어려움.
- 개선: kubectl 미존재/권한/포트 충돌 등 예외 케이스별 로그 분리.

10. application-indexing.yml 사용 가이드 추가

- 파일: src/main/resources/application-indexing.yml
- 문제: 배치 실행 방법이 코드 밖에 있음.
- 개선: README에 실행 커맨드 추가 (문서화)
